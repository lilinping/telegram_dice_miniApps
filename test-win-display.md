# 测试中奖显示功能

## 快速测试步骤

1. **启动开发服务器**
   ```bash
   npm run dev
   ```

2. **打开浏览器控制台**
   - 按 F12 或右键 → 检查
   - 切换到 Console 标签

3. **进行一次下注**
   - 选择筹码金额
   - 点击任意投注区域
   - 点击"确认下注"按钮

4. **观察控制台日志**
   应该看到类似以下的日志：
   ```
   🎰 游戏结果 - win字段: "4" 解析后: 4
   🎰 设置中奖状态 - hasWon: true winAmount: 4
   🎲 DiceAnimation (fullscreen) - hasWon: true winAmount: 4
   ```

5. **验证界面显示**
   - 如果中奖（win > 0）：
     - ✅ 显示 "🎉 恭喜中奖！"
     - ✅ 显示中奖金额，如 "+$4.00"
     - ✅ 金额使用金色高亮显示
   
   - 如果未中奖（win = 0）：
     - ✅ 显示 "未中奖，再接再厉"
     - ✅ 使用灰色文字

## 预期行为

### 场景1：中奖
- API 返回: `{ win: "4", ... }`
- 界面显示:
  ```
  🎉 恭喜中奖！
  +$4.00
  ```

### 场景2：未中奖
- API 返回: `{ win: "0", ... }`
- 界面显示:
  ```
  未中奖，再接再厉
  ```

## 调试技巧

如果显示不正确，检查以下内容：

1. **检查 API 响应**
   - 在 Network 标签中查找 `/api/backend/dice/query` 请求
   - 确认响应中包含 `win` 字段

2. **检查状态更新**
   - 在控制台搜索 "🎰" 查看状态更新日志
   - 确认 `winAmount` 和 `hasWon` 被正确设置

3. **检查组件接收**
   - 在控制台搜索 "🎲" 查看组件接收的 props
   - 确认 fullscreen 模式下收到正确的值

## 已修复的问题

✅ 从 API 响应中正确提取 `win` 字段
✅ 将中奖信息存储在 GameContext 中
✅ 通过 props 传递给 DiceAnimation 组件
✅ 根据 `hasWon` 和 `winAmount` 显示正确的消息
✅ 添加调试日志便于追踪问题
