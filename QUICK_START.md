# 🎲 骰子动画系统 - 快速启动指南

## 🚀 立即开始

### 1. 启动开发服务器

```bash
npm run dev
```

### 2. 访问测试页面

打开浏览器访问：

```
http://localhost:3000/test-dice
```

### 3. 测试功能

- ✅ 点击"随机测试"按钮生成新结果
- ✅ 观察完整的动画流程
- ✅ 查看右上角FPS显示
- ✅ 检查控制台日志

### 4. 集成到游戏页面

游戏页面已自动集成新动画系统！

访问：
```
http://localhost:3000/game
```

## 📊 功能检查清单

### 核心功能
- [x] 3D骰子渲染
- [x] 玻璃筛盅
- [x] 物理模拟
- [x] 完整动画流程
- [x] 声效系统
- [x] 性能优化
- [x] 自动降级

### 动画阶段
- [x] 盖盅（0.3s）
- [x] 摇盅（1.5s）
- [x] 落盅（0.2s）
- [x] 骰子物理（1s）
- [x] 结果校正（0.1s）
- [x] 抬盅（1.0s）
- [x] 结果展示

### 性能优化
- [x] 设备性能检测
- [x] 自动降级
- [x] FPS监控
- [x] 动态画质调整

## 🎮 使用说明

### 自动版本切换

系统会自动检测设备性能：
- **高端设备**：使用Three.js 3D版本
- **中低端设备**：使用CSS 2D版本

### 手动切换版本（开发模式）

在游戏页面左上角点击按钮：
- **2D**：CSS版本（兼容性好）
- **3D**：Three.js版本（效果更好）

### 查看性能

开发模式下，右上角显示实时FPS：
- 🟢 绿色（≥50）：性能良好
- 🟡 黄色（30-50）：性能一般
- 🔴 红色（<30）：性能不足

## 🔧 配置选项

### 强制使用指定版本

在组件中：

```typescript
// 强制使用Three.js版本
<DiceAnimation forceVersion="three" />

// 强制使用CSS版本
<DiceAnimation forceVersion="css" />

// 自动选择（默认）
<DiceAnimation />
```

### 用户偏好

用户选择会自动保存，下次访问时使用上次的选择。

清除偏好：
```javascript
localStorage.removeItem('dice_animation_version');
```

## 🎵 音效说明

### 当前状态

系统使用Web Audio API生成简单音效。

### 添加真实音效

1. 下载音效文件（MP3格式）
2. 放到 `public/sounds/` 目录
3. 重启开发服务器

需要的文件：
- `cup-shake.mp3` - 摇盅声
- `dice-collision.mp3` - 碰撞声
- `cup-drop.mp3` - 落盅声
- `cup-lift.mp3` - 抬盅声
- `result-show.mp3` - 结果音效

### 音效来源

推荐网站：
- [Freesound.org](https://freesound.org/)
- [Zapsplat.com](https://www.zapsplat.com/)
- [Mixkit.co](https://mixkit.co/free-sound-effects/)

## 🐛 故障排除

### 问题1：看不到3D效果

**检查**：
1. 浏览器是否支持WebGL
2. 访问 `chrome://gpu` 查看GPU状态
3. 查看控制台是否有错误

**解决**：
- 系统会自动降级到CSS版本
- 或手动切换到2D模式

### 问题2：FPS过低

**检查**：
1. 查看右上角FPS显示
2. 检查设备性能等级

**解决**：
- 系统会自动降低画质
- 或自动切换到CSS版本
- 手动切换到2D模式

### 问题3：动画卡顿

**检查**：
1. 关闭其他占用GPU的程序
2. 检查浏览器硬件加速是否开启

**解决**：
- 切换到CSS版本
- 降低浏览器缩放比例

### 问题4：没有声音

**说明**：
- 当前使用简单音效
- 不影响动画流程

**改进**：
- 添加真实音效文件

## 📱 移动端测试

### iOS Safari
```
http://your-ip:3000/test-dice
```

### Android Chrome
```
http://your-ip:3000/test-dice
```

### 注意事项
- 移动端会自动使用优化设置
- 低端设备自动降级到CSS版本
- 触摸操作完全支持

## 🎯 性能基准

### 桌面端
- **高端**：60 FPS，~80MB内存
- **中端**：50-60 FPS，~60MB内存
- **低端**：CSS版本，~20MB内存

### 移动端
- **高端**：50-60 FPS，~50MB内存
- **中端**：30-50 FPS，~40MB内存
- **低端**：CSS版本，~20MB内存

## 📚 更多文档

- **集成指南**：`DICE_ANIMATION_INTEGRATION.md`
- **开发计划**：`DICE_ANIMATION_OPTIMIZATION_PLAN.md`
- **进度报告**：`DICE_ANIMATION_PROGRESS.md`
- **需求文档**：`dice_shaker_requirements.md`

## 🎉 完成！

现在你可以：
1. ✅ 在测试页面体验完整效果
2. ✅ 在游戏页面使用新动画
3. ✅ 根据需要调整配置
4. ✅ 享受真实的3D骰子体验

## 💡 提示

### 开发模式功能
- FPS显示（右上角）
- 版本切换按钮（左上角）
- 详细控制台日志
- 性能监控

### 生产模式
- 自动版本选择
- 性能优化
- 错误处理
- 用户偏好保存

---

**有问题？**
- 查看控制台日志
- 检查FPS显示
- 阅读故障排除部分
- 查看详细文档

**祝你使用愉快！🎲**
